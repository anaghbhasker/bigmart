<%- include('./layout/main'); -%> <%- include('./layout/header'); -%>

<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-12 grid-margin">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Category</h4>

            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
              data-bs-whatever="@getbootstrap"
            >
              Add Category
            </button>

            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                      New Category
                    </h5>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <form action="/admin/addCategory" method="post" enctype="multipart/form-data">
                      <div class="mb-3">
                        <label for="recipient-name" class="col-form-label"
                          >Category Name:</label
                        >
                        <div id="errorCatename"></div>
                        <input
                          type="text"
                          class="form-control"
                          name="categoryname"
                          id="categoryname"
                        />
                      </div>
                      <div class="mb-3">
                        <label for="formFile" class="form-label">Category image</label>
                        <div id="errorCateimg"></div>
                        <input class="form-control" type="file" id="categoryImage" name="categoryimage">
                      </div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-secondary"
                          data-bs-dismiss="modal"
                        >
                          Close
                        </button>
                        <button type="submit" id="cateButton" class="btn btn-primary">
                          Add
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th></th>
                    <th>Category image</th>
                    <th>Category name</th>
                    <th>Product count</th>
                    <th>Products</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <% categoryDetails.forEach(category => { %>

                  <tr>
                    <td>
                      <div class="form-check form-check-muted m-0">
                        <label class="form-check-label">
                          <input type="checkbox" class="form-check-input" />
                        </label>
                      </div>
                    </td>
                    <td>
                      <img src="data:<%= category.contentType %>;base64,<%= category.imageBase64 %>" alt="image" style="width: 70px; height: 70px;" class="ml-4">
                    </td>
                    <td><%= category.category_name %></td>
                    <td>1</td>
                    <td>
                      <a href="#">
                        <div class="badge badge-outline-success">Products</div>
                      </a>
                    </td>

                    <td>
                      <a onclick="categoryDelete('<%= category._id %>')">
                        <span
                          class="material-symbols-outlined text-danger ml-4"
                        >
                          delete
                        </span>
                      </a>
                    </td>
                  </tr>

                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>




<%-include('./layout/end'); -%>
<%-include('./layout/footer'); -%>
